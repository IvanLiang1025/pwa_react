[{"D:\\pwa\\ivan_projects\\pwa_v1\\src\\index.js":"1","D:\\pwa\\ivan_projects\\pwa_v1\\src\\App.js":"2","D:\\pwa\\ivan_projects\\pwa_v1\\src\\serviceWorkerRegistration.js":"3","D:\\pwa\\ivan_projects\\pwa_v1\\src\\reportWebVitals.js":"4","D:\\pwa\\ivan_projects\\pwa_v1\\src\\globalData.js":"5","D:\\pwa\\ivan_projects\\pwa_v1\\src\\pushNotification.js":"6","D:\\pwa\\ivan_projects\\pwa_v1\\src\\pages\\login\\index.js":"7","D:\\pwa\\ivan_projects\\pwa_v1\\src\\pages\\Home\\index.js":"8","D:\\pwa\\ivan_projects\\pwa_v1\\src\\services\\api.js":"9","D:\\pwa\\ivan_projects\\pwa_v1\\src\\pages\\List\\index.js":"10","D:\\pwa\\ivan_projects\\pwa_v1\\src\\pages\\Videos\\index.js":"11","D:\\pwa\\ivan_projects\\pwa_v1\\src\\redux\\store.js":"12","D:\\pwa\\ivan_projects\\pwa_v1\\src\\redux\\reducers\\index.js":"13","D:\\pwa\\ivan_projects\\pwa_v1\\src\\redux\\reducers\\login.js":"14","D:\\pwa\\ivan_projects\\pwa_v1\\src\\redux\\sagas\\index.js":"15","D:\\pwa\\ivan_projects\\pwa_v1\\src\\redux\\sagas\\login.js":"16","D:\\pwa\\ivan_projects\\pwa_v1\\src\\pages\\Order\\index.js":"17","D:\\pwa\\ivan_projects\\pwa_v1\\src\\utils\\authority.js":"18","D:\\pwa\\ivan_projects\\pwa_v1\\src\\utils\\utils.js":"19","D:\\pwa\\ivan_projects\\pwa_v1\\src\\utils\\request.js":"20","D:\\pwa\\ivan_projects\\pwa_v1\\src\\redux\\reducers\\userOrders.js":"21","D:\\pwa\\ivan_projects\\pwa_v1\\src\\redux\\sagas\\userOrders.js":"22","D:\\pwa\\ivan_projects\\pwa_v1\\src\\utils\\history.js":"23"},{"size":866,"mtime":1611619384373,"results":"24","hashOfConfig":"25"},{"size":2276,"mtime":1611941813037,"results":"26","hashOfConfig":"25"},{"size":5599,"mtime":1611623652030,"results":"27","hashOfConfig":"25"},{"size":364,"mtime":499162500000,"results":"28","hashOfConfig":"25"},{"size":204,"mtime":1611620590518,"results":"29","hashOfConfig":"25"},{"size":3858,"mtime":1611780177270,"results":"30","hashOfConfig":"25"},{"size":2776,"mtime":1611940142466,"results":"31","hashOfConfig":"25"},{"size":338,"mtime":1611619188944,"results":"32","hashOfConfig":"25"},{"size":9414,"mtime":1611878111091,"results":"33","hashOfConfig":"25"},{"size":2190,"mtime":1611939847340,"results":"34","hashOfConfig":"25"},{"size":1221,"mtime":1611624143819,"results":"35","hashOfConfig":"25"},{"size":936,"mtime":1611940675631,"results":"36","hashOfConfig":"25"},{"size":1089,"mtime":1611938272894,"results":"37","hashOfConfig":"25"},{"size":811,"mtime":1611940301813,"results":"38","hashOfConfig":"25"},{"size":545,"mtime":1611880484026,"results":"39","hashOfConfig":"25"},{"size":946,"mtime":1611939879836,"results":"40","hashOfConfig":"25"},{"size":1338,"mtime":1611878105944,"results":"41","hashOfConfig":"25"},{"size":3966,"mtime":1611591499083,"results":"42","hashOfConfig":"25"},{"size":908,"mtime":1611609304357,"results":"43","hashOfConfig":"25"},{"size":4812,"mtime":1611591480305,"results":"44","hashOfConfig":"25"},{"size":716,"mtime":1611940040122,"results":"45","hashOfConfig":"25"},{"size":795,"mtime":1611939920744,"results":"46","hashOfConfig":"25"},{"size":98,"mtime":1611934170572,"results":"47","hashOfConfig":"25"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},"1udo51u",{"filePath":"51","messages":"52","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"53","usedDeprecatedRules":"50"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"60","messages":"61","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"62","usedDeprecatedRules":"50"},{"filePath":"63","messages":"64","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"65","usedDeprecatedRules":"50"},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"68","messages":"69","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"70","messages":"71","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"72","usedDeprecatedRules":"50"},{"filePath":"73","messages":"74","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"75","usedDeprecatedRules":"50"},{"filePath":"76","messages":"77","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"78","messages":"79","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"80","messages":"81","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"82","usedDeprecatedRules":"50"},{"filePath":"83","messages":"84","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"85","messages":"86","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"87","usedDeprecatedRules":"50"},{"filePath":"88","messages":"89","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"90","usedDeprecatedRules":"50"},{"filePath":"91","messages":"92","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"93","messages":"94","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"95","usedDeprecatedRules":"50"},{"filePath":"96","messages":"97","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"98"},{"filePath":"99","messages":"100","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"101","usedDeprecatedRules":"50"},{"filePath":"102","messages":"103","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"104","usedDeprecatedRules":"50"},{"filePath":"105","messages":"106","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},"D:\\pwa\\ivan_projects\\pwa_v1\\src\\index.js",[],["107","108"],"D:\\pwa\\ivan_projects\\pwa_v1\\src\\App.js",["109","110","111"],"import React from 'react';\nimport logo from './logo.svg';\n// import bgImg from '%PUBLIC_URL%/images/1.png';\nimport bgImg2 from './images/3.jpg';\nimport './App.css';\nimport { awsImageUrl } from './globalData';\nimport Notification from './pages/Order/index';\n// import\n\n// import { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\nimport {  Route, Switch } from \"react-router\";\nimport Home from './pages/Home/index';\nimport Login from './pages/login/index';\nimport OrderList from './pages/List/index';\nimport Videos from './pages/Videos/index';\nimport { Provider } from 'react-redux';\nimport store from './redux/store';\nimport { history } from '@/utils/history';\nimport { ConnectedRouter } from 'connected-react-router';\n\n\n\nfunction App() {\n  // console.log(history)\n  return (\n    <Provider store={store}>\n      <ConnectedRouter history={history}>\n        <Switch>\n          <Route path='/' exact component={Home}></Route>\n          <Route path='/home' exact component={Home}></Route>\n          <Route path='/login' exact component={Login}></Route>\n          <Route path='/sme/account/orders' exact component={OrderList}></Route>\n          <Route path='/videos' exact component={Videos}></Route>\n          <Route path='/notification' exact component={Notification}></Route>\n        </Switch>\n      </ConnectedRouter>\n    </Provider>\n\n    // <div className=\"App\">\n    //   <header className=\"App-header\">\n    //     <img src={logo} className=\"App-logo\" alt=\"logo\" />\n    //     <p>\n    //       Edit <code>src/App.js</code> and save to reload.\n    //     </p>\n    //     <a\n    //       className=\"App-link\"\n    //       href=\"https://reactjs.org\"\n    //       target=\"_blank\"\n    //       rel=\"noopener noreferrer\"\n    //     >\n    //       Learn React\n    //     </a>\n    //     {/* public 目录下资源 */}\n    //     <img width={100} height={100} src={process.env.PUBLIC_URL + '/images/1.png'} className=\"App-logo\" alt=\"logo\" />\n    //     {/* src 目录下图片资源，已经被预缓存 */}\n    //     <img width={100} height={100} src={bgImg2} className=\"App-logo\" alt=\"logo\" />\n    //     {/*  test fetch server image*/}\n    //     <img width={100} height={100} src={awsImageUrl}></img>\n\n    //   </header>\n    // </div>\n  );\n}\n\nexport default App;\n","D:\\pwa\\ivan_projects\\pwa_v1\\src\\serviceWorkerRegistration.js",[],"D:\\pwa\\ivan_projects\\pwa_v1\\src\\reportWebVitals.js",[],"D:\\pwa\\ivan_projects\\pwa_v1\\src\\globalData.js",[],"D:\\pwa\\ivan_projects\\pwa_v1\\src\\pushNotification.js",["112","113","114"],"/**\r\n * @file entry.js\r\n * @description web push client\r\n */\r\nconst VAPIDPublicKey = 'BKxT-jeUORxwp0OeosYCEh82H4p3jKJaFCmk2uzbvsPutZ7CsuMEhtmBNq9lXdeksiDwmM3-4EbUteFZSKExisk'\r\n// 注册 service worker 并缓存 registration\r\nlet registration\r\nfunction registerServiceWorker () {\r\n  if (!navigator.serviceWorker) {\r\n    return Promise.reject('系统不支持 service worker')\r\n  }\r\n\r\n  return navigator.serviceWorker.register('/sw.js').then(function (reg) {\r\n    registration = reg\r\n  })\r\n}\r\n\r\n\r\n// 申请桌面通知权限\r\nfunction requestNotificationPermission () {\r\n  // 系统不支持桌面通知\r\n  if (!window.Notification) {\r\n    return Promise.reject('系统不支持桌面通知')\r\n  }\r\n\r\n  return Notification.requestPermission()\r\n    .then(function (permission) {\r\n      console.log(permission);\r\n      if (permission === 'granted') {\r\n        return Promise.resolve()\r\n      }\r\n      if(permission === 'denied'){\r\n        return Promise.reject('用户已禁止桌面通知权限')\r\n      }else{\r\n        return Promise.reject('用户选择了默认行为')\r\n      }\r\n     \r\n    })\r\n}\r\n\r\n// 订阅推送并将订阅结果发送给后端\r\nfunction subscribeAndDistribute (registration) {\r\n  if (!window.PushManager) {\r\n    return Promise.reject('系统不支持消息推送')\r\n  }\r\n  // 检查是否已经订阅过\r\n  return registration.pushManager.getSubscription().then(function (subscription) {\r\n    // 如果已经订阅过，就不重新订阅了\r\n    // console.log(subscription)\r\n    // if (subscription) {\r\n    //   return\r\n    // }\r\n    // 如果尚未订阅则发起推送订阅\r\n    return registration.pushManager.subscribe({\r\n      userVisibleOnly: true,\r\n      applicationServerKey: base64ToUint8Array(VAPIDPublicKey)\r\n    }).then(function (subscription) {\r\n      // 订阅推送成功之后，将订阅信息传给后端服务器\r\n      console.log(subscription)\r\n      distributePushResource(subscription)\r\n    })\r\n  })\r\n}\r\n\r\nfunction distributePushResource (subscription) {\r\n  return fetch('http://localhost:8090/api/push/subscribe', {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({\r\n      endpoint: subscription.endpoint,\r\n      keys: {\r\n        p256dh: uint8ArrayToBase64(subscription.getKey('p256dh')),\r\n        auth: uint8ArrayToBase64(subscription.getKey('auth'))\r\n      },\r\n      \r\n    })\r\n  })\r\n}\r\n\r\nfunction uint8ArrayToBase64 (arr) {\r\n  return btoa(String.fromCharCode.apply(null, new Uint8Array(arr)))\r\n}\r\n\r\nfunction base64ToUint8Array (base64String) {\r\n  let padding = '='.repeat((4 - base64String.length % 4) % 4)\r\n  let base64 = (base64String + padding)\r\n    .replace(/-/g, '+')\r\n    .replace(/_/g, '/')\r\n  let rawData = atob(base64)\r\n  let outputArray = new Uint8Array(rawData.length)\r\n  for (let i = 0; i < rawData.length; i++) {\r\n    outputArray[i] = rawData.charCodeAt(i)\r\n  }\r\n  return outputArray\r\n}\r\n\r\n// 注册 service worker\r\n// registerServiceWorker()\r\n//   // 申请桌面通知权限\r\n//   .then(function () {\r\n//     requestNotificationPermission()\r\n//   })\r\n//   // 订阅推送\r\n//   .then(function () {\r\n//     subscribeAndDistribute(registration)\r\n//   })\r\n//   .catch(function (err) {\r\n//     console.log(err)\r\n//   })\r\n\r\n\r\n  //ivan\r\n  \r\nconst isNotificationSupported = () => {\r\n  if(!window.Notification){\r\n    return false;\r\n  }\r\n  return true;\r\n} \r\n\r\nconst isPushNoteSupported = () => {\r\n  if(!window.PushManager){\r\n    return false;\r\n  }\r\n  return true;\r\n}\r\n\r\n\r\n\r\n\r\n\r\n//get sw registration outside the sw file\r\nconst getSwRegistration = () => {\r\n  if(!'serviceWorker' in navigator) {\r\n    return null\r\n  }\r\n\r\n return navigator.serviceWorker.getRegistration()\r\n}\r\n\r\n\r\n  export {\r\n    isNotificationSupported,\r\n    isPushNoteSupported,\r\n    requestNotificationPermission,\r\n    subscribeAndDistribute,\r\n    getSwRegistration\r\n  }","D:\\pwa\\ivan_projects\\pwa_v1\\src\\pages\\login\\index.js",["115"],"import React from 'react';\r\n\r\nimport {\r\n  Button,\r\n  Form,\r\n  Input,\r\n  message\r\n} from 'antd';\r\n\r\nimport {encodePass} from '@/utils/utils';\r\nimport { connect } from \"react-redux\";\r\nimport {actions as LoginActions} from '@/redux/reducers/login';\r\nimport {bindActionCreators} from 'redux';\r\nimport {Link} from 'react-router-dom';\r\n\r\n\r\n// @Form.create()\r\n\r\nclass Login extends React.PureComponent{\r\n\r\n  constructor(){\r\n    super();\r\n    this.state = {\r\n      email: 'ivan@trustiics.com',\r\n      password: '123456',\r\n    }\r\n  }\r\n\r\n  handleLogin = () => {\r\n    const {email, password} = this.state;\r\n    const {actions} = this.props;\r\n    console.log(email)\r\n    if(!email || !password) {\r\n      message.error(\"Please input your email and password\");\r\n    }\r\n    const postData = {\r\n      userName: email,\r\n      password: encodePass(password),\r\n      role: 0\r\n    }\r\n\r\n    actions.login(postData);\r\n  }\r\n\r\n \r\n\r\n  render() {\r\n    \r\n    // const {form} = this.props;\r\n    // console.log(form);\r\n    const {email, password} = this.state;\r\n    console.log(this.props.logInStatus)\r\n    console.log(this.props.location);\r\n  \r\n    return (\r\n      <div>\r\n        <div>\r\n          <div>Email</div>\r\n          <Input\r\n            onChange={(e) => this.setState({email: e.target.value})}\r\n            value={email}\r\n          >\r\n          </Input>\r\n        </div>\r\n        <div>\r\n          <div>password</div>\r\n          <Input\r\n            onChange={(e) => this.setState({password: e.target.value})}\r\n            value={password}\r\n          />\r\n        </div>\r\n        <div><Button type='primary' onClick={this.handleLogin}>confirm</Button></div>\r\n        <Link to='/'>back to home</Link>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    logInStatus: state.logIn.logInStatus,\r\n    location: state.router.location,\r\n  }\r\n}\r\nconst mapDispatchToProps = dispatch => ({actions: bindActionCreators(LoginActions, dispatch)})\r\n// const mapDispatchToProps = (dispatch) => {\r\n//   return {\r\n//     login(payload, callback) {\r\n//       // const username = usernameEle.value;\r\n//       // const password = passwordEle.value;\r\n//       // console.log(username, password);\r\n//       dispatch({\r\n//         type: 'SET_LOGIN_STATUS',\r\n//         payload,\r\n//         callback,\r\n//       });\r\n//     }\r\n//     // ...bindActionCreators({\r\n//     //   login: setLogInStatus\r\n//     // }, dispatch),\r\n//     // logIn(usernameEle, passwordEle){\r\n//     //     const username = usernameEle.value;\r\n//     //     const password = passwordEle.value;\r\n//     //     console.log(username, password);\r\n//     //     dispatch(actionCreators.checkLogIn(username, password));\r\n\r\n//     // }\r\n//   }\r\n// }\r\n \r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);\r\n","D:\\pwa\\ivan_projects\\pwa_v1\\src\\pages\\Home\\index.js",[],"D:\\pwa\\ivan_projects\\pwa_v1\\src\\services\\api.js",[],"D:\\pwa\\ivan_projects\\pwa_v1\\src\\pages\\List\\index.js",["116","117","118","119","120"],"import React from 'react';\r\n\r\nimport {\r\n  Button,\r\n  Form,\r\n  Input,\r\n  message\r\n} from 'antd';\r\n\r\nimport {actions as userOrderActions} from '@/redux/reducers/userOrders';\r\nimport {bindActionCreators} from 'redux';\r\nimport {connect} from 'react-redux';\r\n\r\n\r\n\r\n// @Form.create()\r\n\r\nclass OrderList extends React.PureComponent {\r\n\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      list: []\r\n    }\r\n  }\r\n\r\n\r\n  // fetchList = async () => {\r\n  //   const response = yield call(apiGet,'/sme/orders', data);\r\n  //   const result = parseResList(response, pagination);\r\n  //   if(result){\r\n  //     yield put({\r\n  //       type: 'save1',\r\n  //       payload: result,\r\n  //     });\r\n  //   }\r\n  // }\r\n\r\n  componentDidMount() {\r\n    const data = {\r\n      status: 1,\r\n      // page:pagination.current,\r\n      // limit:pagination.pageSize,\r\n      // count:pagination.total\r\n    };\r\n    const {actions} = this.props;\r\n    console.log(actions);\r\n\r\n    actions.fetchOrders(data);\r\n\r\n    // const response = await apiGet('/sme/orders', data);\r\n    // const result = parseResList(response);\r\n    // if (result) {\r\n    //   this.setState({\r\n    //     list: result.list\r\n    //   })\r\n    // }\r\n  }\r\n\r\n\r\n\r\n  render() {\r\n    // const {list} = this.state;\r\n    // console.log(this.state);\r\n    const {userOrders} = this.props;\r\n\r\n    return (\r\n      <div>\r\n        Order List\r\n\r\n        {\r\n          userOrders && userOrders.map(item => {\r\n            return (\r\n              <div key={item.orderId}> {item.orderId} </div>\r\n            )\r\n          })\r\n        }\r\n\r\n        <div>\r\n          test cache image/video resource located at aws s3\r\n           \r\n          <div>\r\n          <img width={100} height={100} src={\"https://res.trustiics.com/res-localdev/B1ON19980686ROKxZcvAt20210110212148.jpg\"}></img>\r\n          </div>\r\n        </div>\r\n        {/* <Link to='/videos'>videos</Link> */}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    userOrders: state.userOrders.data1.list\r\n  }\r\n}\r\nconst mapDispatchToProps = dispatch => ({actions: bindActionCreators(userOrderActions, dispatch)})\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(OrderList);\r\n","D:\\pwa\\ivan_projects\\pwa_v1\\src\\pages\\Videos\\index.js",["121","122"],"\r\nimport React from 'react';\r\nimport {\r\n  Row,\r\n  Col,\r\n} from 'antd';\r\n\r\n\r\nexport default class Video extends React.PureComponent {\r\n\r\n  render() {\r\n\r\n    const responsiveController = {\r\n      xs: 24,\r\n      md: 16,\r\n      lg: 8\r\n    }\r\n\r\n    return (\r\n      <div>\r\n        <div>\r\n          test cache image/video resource located at aws s3\r\n             {/*  test fetch server image*/}\r\n          <img width={100} height={100} src={\"https://res.trustiics.com/res-localdev/B1ON19980686ROKxZcvAt20210110212148.jpg\"}></img>\r\n        </div>\r\n        <Row>\r\n          <Col>\r\n            <video crossOrigin='anonymous' id=\"video\" controls width='100%' height='100%' controlslist='nodownload' disablePictureInPicture>\r\n              <source src={'https://res.trustiics.com/Webinar_Video_without_Captions.mp4'}  type=\"video/mp4\" />\r\n            </video>\r\n          </Col>\r\n          <Col>\r\n            <video crossOrigin='anonymous' id=\"video\" controls width='100%' height='100%' controlslist='nodownload' disablePictureInPicture>\r\n              <source src={'https://res.trustiics.com/Webinar_Video_without_Captions.mp4'} type=\"video/mp4\" />\r\n            </video>\r\n          </Col>\r\n        </Row>\r\n      </div>\r\n    )\r\n  }\r\n}","D:\\pwa\\ivan_projects\\pwa_v1\\src\\redux\\store.js",[],"D:\\pwa\\ivan_projects\\pwa_v1\\src\\redux\\reducers\\index.js",[],"D:\\pwa\\ivan_projects\\pwa_v1\\src\\redux\\reducers\\login.js",["123","124"],"\r\nexport const types = {\r\n  SET_LOGIN_STATUS: \"SET_LOGIN_STATUS\",\r\n  LOG_OUT: \"LOG_OUT\",\r\n  LOGIN: \"LOGIN\",\r\n}\r\n\r\nexport const actions = {\r\n  login: (payload) => ({type: types.LOGIN, payload}),\r\n  setLogInStatus: (payload) => ({type: types.SET_LOGIN_STATUS}, payload),\r\n}\r\n\r\n\r\nconst defaulState = {\r\n    logInStatus: false\r\n}\r\n\r\nexport default  (state=defaulState, action) => {\r\n    const tempState = JSON.parse(JSON.stringify(state));\r\n\r\n    switch(action.type){\r\n        case types.SET_LOGIN_STATUS:\r\n            // const {logInStatus} = action;\r\n            return {\r\n              ...state,\r\n              logInStatus: action.payload\r\n            }\r\n        case types.LOG_OUT:\r\n            tempState.logInStatus = false;\r\n            return tempState;\r\n        default:\r\n            return state;\r\n    }\r\n}","D:\\pwa\\ivan_projects\\pwa_v1\\src\\redux\\sagas\\index.js",[],"D:\\pwa\\ivan_projects\\pwa_v1\\src\\redux\\sagas\\login.js",["125","126","127"],"\r\nimport {put, call, delay, takeLatest, takeEvery} from 'redux-saga/effects';\r\nimport {types as actionTypes} from '../reducers/login';\r\nimport { apiPost, parseResSubmit } from '@/services/api';\r\nimport {setLoginAuthority} from '@/utils/authority';\r\nimport {push} from 'connected-react-router';\r\n\r\nexport function* LogIn (action) {\r\n  const {payload, callback} = action;\r\n  console.log(action)\r\n  const response = yield call(apiPost, '/login', payload || {});\r\n  const result = parseResSubmit(response);\r\n  console.log(result)\r\n\r\n  if(result){\r\n    yield put({\r\n      type: actionTypes.SET_LOGIN_STATUS,\r\n      payload: true\r\n    })\r\n    const { sessionId, accessToken, incomplete, role } = result;\r\n    setLoginAuthority(sessionId, accessToken, role);\r\n  \r\n    yield put(push('/sme/account/orders'))\r\n  }\r\n\r\n  if(callback) callback(result);\r\n\r\n}\r\n\r\n\r\n\r\nexport default function* rootSaga() {\r\n  yield takeEvery(actionTypes.LOGIN, LogIn)\r\n}\r\n\r\n\r\n\r\n","D:\\pwa\\ivan_projects\\pwa_v1\\src\\pages\\Order\\index.js",["128"],"import React from 'react';\r\nimport {\r\n  isNotificationSupported,\r\n  isPushNoteSupported,\r\n  requestNotificationPermission,\r\n  subscribeAndDistribute,\r\n  getSwRegistration\r\n} from '../../pushNotification.js';\r\nimport {\r\n  Button\r\n} from 'antd';\r\n\r\n\r\nclass Order extends React.PureComponent{\r\n\r\n  constructor(){\r\n    super();\r\n    const state = {\r\n      orderList: []\r\n    }\r\n  }\r\n\r\n  handleShowNotification = (e) => {\r\n    console.log('hehe')\r\n    requestNotificationPermission().then(() => {\r\n      getSwRegistration().then(registration => {\r\n        console.log(registration)\r\n        subscribeAndDistribute(registration)\r\n      })\r\n    }).catch(err => {\r\n      console.log(err)\r\n    })\r\n  }\r\n\r\n  render() {\r\n    // const {orderList} = this.state;\r\n    // console.log(isPushNoteSupported());\r\n    // console.log(isNotificationSupported());\r\n\r\n    if(isPushNoteSupported() && isNotificationSupported()){\r\n      return (\r\n        <div>\r\n          We would like to send notification to you when there are any notifications related to your order\r\n          <Button type='primary' onClick={this.handleShowNotification}>Got it</Button> \r\n        </div>\r\n      )\r\n    }\r\n    \r\n    return (\r\n      <div>\r\n        <div>\r\n          The browser does not support push function \r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Order;\r\n","D:\\pwa\\ivan_projects\\pwa_v1\\src\\utils\\authority.js",[],"D:\\pwa\\ivan_projects\\pwa_v1\\src\\utils\\utils.js",["129"],"export function str2b64(str) {\r\n  // return window.btoa(unescape(encodeURIComponent(str)));\r\n  // ivan 20201019\r\n  return window.btoa(encodeURIComponent(str));\r\n}\r\n\r\n// sunny 20200505 save cookie\r\nexport function setCrossSubdomainCookie(name, value, days) {\r\n  const assign = `${name}=${escape(value)};`;\r\n  const d = new Date();\r\n  d.setTime(d.getTime() + (days * 24 * 60 * 60 * 1000));\r\n  const expires = `expires=${d.toUTCString()};`;\r\n  const path = \"path=/;\";\r\n  let domain = '';\r\n  // localhost test\r\n\r\n  if (document.domain !== 'localhost') {\r\n    domain = `domain=${document.domain.match(/[^\\.]*\\.[^.]*$/)[0]};`;\r\n  }\r\n\r\n  document.cookie = assign + expires + path + domain;\r\n}\r\n\r\nexport function getLocalTimeOffset() {\r\n  const date2 = new Date();\r\n  return date2.getTimezoneOffset();\r\n}\r\n\r\n\r\nexport function encodePass(pass) {\r\n  const p = window.btoa(`@#098#%*&%12${pass}`);\r\n  return `y${p}L`;\r\n}","D:\\pwa\\ivan_projects\\pwa_v1\\src\\utils\\request.js",["130","131"],"/**\r\n * request 网络请求工具\r\n * 更详细的api文档\b: https://bigfish.alipay.com/doc/api#request\r\n */\r\nimport { extend } from 'umi-request';\r\nimport { message } from 'antd';\r\n// import router from 'umi/router';\r\nimport { getSessionId, getAccessToken, getAuthority } from './authority';\r\nimport globalData from '../globalData';\r\nimport { getLocalTimeOffset } from './utils';\r\n\r\nconst codeMessage = {\r\n  // 200: '服务器成功返回请求的数据。',\r\n  // 201: '新建或修改数据成功。',\r\n  // 202: '一个请求已经进入后台排队（异步任务）。',\r\n  // 204: '删除数据成功。',\r\n  // 400: '发出的请求有错误，服务器没有进行新建或修改数据的操作。',\r\n  // 401: '用户没有权限（令牌、用户名、密码错误）。',\r\n  // 403: '用户得到授权，但是访问是被禁止的。',\r\n  // 404: '发出的请求针对的是不存在的记录，服务器没有进行操作。',\r\n  // 406: '请求的格式不可得。',\r\n  // 410: '请求的资源被永久删除，且不会再得到的。',\r\n  // 422: '当创建一个对象时，发生一个验证错误。',\r\n  // 500: '服务器发生错误，请检查服务器。',\r\n  // 502: '网关错误。',\r\n  // 503: '服务不可用，服务器暂时过载或维护。',\r\n  // 504: '网关超时。',\r\n};\r\n\r\n// wiley 20200721 handle401\r\nconst handle401 = ()=>{\r\n  const auth = getAuthority();\r\n  // console.log('==========',auth)\r\n  const isLawyer = auth && auth[0] === 'lawyer';\r\n  if (isLawyer) {\r\n    window.g_app._store.dispatch({\r\n      type: 'login2/logout',\r\n    });\r\n  }  else {\r\n    window.g_app._store.dispatch({\r\n      type: 'login/logout',\r\n    });\r\n  }\r\n}\r\n// wiley 20200721 handle403\r\nconst handle403 = ()=>{\r\n  message.warn('It seems you have signed in as another role.');\r\n  const auth = getAuthority();\r\n  // console.log('==========',auth)\r\n  const isLawyer = auth && auth[0] === 'lawyer';\r\n\r\n  console.log(auth);\r\n  if (isLawyer) {\r\n    window.g_app._store.dispatch({\r\n      type: 'login2/gotologin',\r\n    });\r\n  }else {\r\n    window.g_app._store.dispatch({\r\n      type: 'login/gotologin',\r\n    });\r\n  }\r\n}\r\n// wiley 20200721 thisUrlNeedPermission\r\nconst thisUrlNeedPermission = (url) =>{\r\n  if(!url)return false;\r\n  return url.indexOf('/sme/')>0 ||\r\n  url.indexOf('/lawyer/')>0 ||\r\n  url.indexOf('/user/')>0 ||\r\n  url.indexOf('/changepassword')>0;\r\n}\r\n\r\n/**\r\n * 异常处理程序\r\n */\r\nconst errorHandler = error => {\r\n  const { response = {} } = error;\r\n  const errortext = codeMessage[response.status] || response.statusText;\r\n  const { status, url } = response;\r\n  console.log('error',error)\r\n  // 20200721 wiley 403 should relogin\r\n  if (status === 401) {\r\n    handle401();\r\n  } else if (status === 403 || error.message === '403') {\r\n    handle403();\r\n  } else {\r\n    message.error('System Error');\r\n  }\r\n\r\n  // environment should not be used\r\n  // if (status === 403) {\r\n  //   router.push('/exception/403');\r\n  //   return;\r\n  // }\r\n  // if (status <= 504 && status >= 500) {\r\n  //   router.push('/exception/500');\r\n  //   return;\r\n  // }\r\n  // if (status >= 404 && status < 422) {\r\n  //   router.push('/exception/404');\r\n  // }\r\n};\r\n\r\n/**\r\n * 配置request请求时的默认参数\r\n */\r\nconst request = extend({\r\n  prefix: globalData.serverUrl,\r\n  errorHandler, // 默认错误处理\r\n  credentials: 'include', // 默认请求是否带上cookie\r\n  requestType: 'form',\r\n});\r\n/* eslint-disable no-param-reassign */\r\nrequest.interceptors.request.use((url, options) => {\r\n  const sessionId = getSessionId();\r\n  const token = getAccessToken();\r\n  const tz = getLocalTimeOffset().toString();\r\n\r\n\r\n  // console.log('--url---',url)\r\n  // console.log('--session in localStorage---',sessionId)\r\n  // console.log('--session in global---',globalData.g_sessionId)\r\n  // wiley 20200721 sessionId not equal\r\n  if(sessionId && globalData.g_sessionId && sessionId !== globalData.g_sessionId\r\n    && thisUrlNeedPermission(url)){\r\n    throw new Error(\"403\");\r\n  }\r\n\r\n  if (sessionId) {\r\n    console.log(url, sessionId, token);\r\n    options.headers = {\r\n      ...options.headers,\r\n      x_sessionid_token: sessionId,\r\n      x_access_token: token,\r\n      x_timezone_token: tz,\r\n    };\r\n  } else {\r\n    options.headers = {\r\n      ...options.headers,\r\n    };\r\n  }\r\n\r\n  // console.log(options)\r\n  return {\r\n    url: `${url}`,\r\n    options: {\r\n      ...options,\r\n    },\r\n  };\r\n});\r\n\r\n// request.interceptors.response.use((response, options) => {\r\n//   console.log('interceptors response code:',response.status)\r\n//   if(response.status === 200){\r\n//     response.json().then(res=>{\r\n//       console.log('interceptors response',res);\r\n//     }).catch(res=>{\r\n//       console.log('interceptors responseCatch',res);\r\n//     })\r\n\r\n//   }\r\n\r\n//   return response;\r\n// });\r\n\r\nexport default request;\r\n","D:\\pwa\\ivan_projects\\pwa_v1\\src\\redux\\reducers\\userOrders.js",["132"],"\r\n\r\n\r\nexport const types = {\r\n  FETCH_ORDERS: 'FETCH_ORDERS',\r\n  SAVE_ORDERS: 'SAVE_ORDERS'\r\n}\r\n\r\nexport const actions = {\r\n  fetchOrders: (payload) => ({type: types.FETCH_ORDERS, payload}),\r\n}\r\n\r\n\r\n\r\nconst defaulState = {\r\n  data1: {\r\n    list: undefined,\r\n    // pagination: {pageSize:PAGESIZE,current:globalData.orderPage[0]},\r\n  },\r\n}\r\n\r\nexport default  (state=defaulState, action) => {\r\n    const tempState = JSON.parse(JSON.stringify(state));\r\n\r\n    switch(action.type){\r\n        case types.SAVE_ORDERS:\r\n            tempState.data1.list = action.payload;\r\n            return {\r\n              ...state,\r\n              data1: tempState.data1\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}","D:\\pwa\\ivan_projects\\pwa_v1\\src\\redux\\sagas\\userOrders.js",["133","134","135","136","137"],"\r\nimport {put, call, delay, takeLatest, takeEvery, all} from 'redux-saga/effects';\r\n// import actionTypes from '../actions/actionTypes';\r\nimport { apiPost, parseResList,apiGet } from '@/services/api';\r\nimport {types as actionTypes} from '../reducers/userOrders';\r\n\r\n\r\nexport function* fetchOrders (action) {\r\n  const {payload, callback} = action;\r\n  // console.log(action)\r\n  const response = yield call(apiGet, '/sme/orders', payload);\r\n  // const result = parseResSubmit(response);\r\n  // console.log(response)\r\n  const result = parseResList(response);\r\n\r\n  if(result){\r\n    yield put({\r\n      type: actionTypes.SAVE_ORDERS,\r\n      payload: result.list\r\n    })\r\n  }\r\n\r\n  \r\n}\r\n\r\n\r\n\r\nexport default function* rootSaga() {\r\n \r\n  yield takeLatest(actionTypes.FETCH_ORDERS, fetchOrders)\r\n\r\n}\r\n\r\n\r\n\r\n","D:\\pwa\\ivan_projects\\pwa_v1\\src\\utils\\history.js",[],{"ruleId":"138","replacedBy":"139"},{"ruleId":"140","replacedBy":"141"},{"ruleId":"142","severity":1,"message":"143","line":2,"column":8,"nodeType":"144","messageId":"145","endLine":2,"endColumn":12},{"ruleId":"142","severity":1,"message":"146","line":4,"column":8,"nodeType":"144","messageId":"145","endLine":4,"endColumn":14},{"ruleId":"142","severity":1,"message":"147","line":6,"column":10,"nodeType":"144","messageId":"145","endLine":6,"endColumn":21},{"ruleId":"142","severity":1,"message":"148","line":8,"column":10,"nodeType":"144","messageId":"145","endLine":8,"endColumn":31},{"ruleId":"142","severity":1,"message":"149","line":14,"column":5,"nodeType":"144","messageId":"145","endLine":14,"endColumn":17},{"ruleId":"140","severity":1,"message":"150","line":136,"column":6,"nodeType":"151","messageId":"152","endLine":136,"endColumn":35},{"ruleId":"142","severity":1,"message":"153","line":5,"column":3,"nodeType":"144","messageId":"145","endLine":5,"endColumn":7},{"ruleId":"142","severity":1,"message":"154","line":4,"column":3,"nodeType":"144","messageId":"145","endLine":4,"endColumn":9},{"ruleId":"142","severity":1,"message":"153","line":5,"column":3,"nodeType":"144","messageId":"145","endLine":5,"endColumn":7},{"ruleId":"142","severity":1,"message":"155","line":6,"column":3,"nodeType":"144","messageId":"145","endLine":6,"endColumn":8},{"ruleId":"142","severity":1,"message":"156","line":7,"column":3,"nodeType":"144","messageId":"145","endLine":7,"endColumn":10},{"ruleId":"157","severity":1,"message":"158","line":83,"column":11,"nodeType":"159","endLine":83,"endColumn":128},{"ruleId":"142","severity":1,"message":"160","line":13,"column":11,"nodeType":"144","messageId":"145","endLine":13,"endColumn":31},{"ruleId":"157","severity":1,"message":"158","line":24,"column":11,"nodeType":"159","endLine":24,"endColumn":128},{"ruleId":"161","severity":1,"message":"162","line":10,"column":63,"nodeType":"163","messageId":"164","endLine":10,"endColumn":64},{"ruleId":"165","severity":1,"message":"166","line":18,"column":1,"nodeType":"167","endLine":34,"endColumn":2},{"ruleId":"142","severity":1,"message":"168","line":2,"column":20,"nodeType":"144","messageId":"145","endLine":2,"endColumn":25},{"ruleId":"142","severity":1,"message":"169","line":2,"column":27,"nodeType":"144","messageId":"145","endLine":2,"endColumn":37},{"ruleId":"142","severity":1,"message":"170","line":20,"column":37,"nodeType":"144","messageId":"145","endLine":20,"endColumn":47},{"ruleId":"142","severity":1,"message":"171","line":18,"column":11,"nodeType":"144","messageId":"145","endLine":18,"endColumn":16},{"ruleId":"172","severity":1,"message":"173","line":18,"column":49,"nodeType":"174","messageId":"175","endLine":18,"endColumn":50,"suggestions":"176"},{"ruleId":"142","severity":1,"message":"177","line":77,"column":9,"nodeType":"144","messageId":"145","endLine":77,"endColumn":18},{"ruleId":"142","severity":1,"message":"178","line":78,"column":19,"nodeType":"144","messageId":"145","endLine":78,"endColumn":22},{"ruleId":"165","severity":1,"message":"166","line":22,"column":1,"nodeType":"167","endLine":35,"endColumn":2},{"ruleId":"142","severity":1,"message":"168","line":2,"column":20,"nodeType":"144","messageId":"145","endLine":2,"endColumn":25},{"ruleId":"142","severity":1,"message":"179","line":2,"column":39,"nodeType":"144","messageId":"145","endLine":2,"endColumn":48},{"ruleId":"142","severity":1,"message":"180","line":2,"column":50,"nodeType":"144","messageId":"145","endLine":2,"endColumn":53},{"ruleId":"142","severity":1,"message":"181","line":4,"column":10,"nodeType":"144","messageId":"145","endLine":4,"endColumn":17},{"ruleId":"142","severity":1,"message":"182","line":9,"column":19,"nodeType":"144","messageId":"145","endLine":9,"endColumn":27},"no-native-reassign",["183"],"no-negated-in-lhs",["184"],"no-unused-vars","'logo' is defined but never used.","Identifier","unusedVar","'bgImg2' is defined but never used.","'awsImageUrl' is defined but never used.","'registerServiceWorker' is defined but never used.","'registration' is assigned a value but never used.","The 'in' expression's left operand is negated.","BinaryExpression","negatedLHS","'Form' is defined but never used.","'Button' is defined but never used.","'Input' is defined but never used.","'message' is defined but never used.","jsx-a11y/alt-text","img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","JSXOpeningElement","'responsiveController' is assigned a value but never used.","no-sequences","Unexpected use of comma operator.","SequenceExpression","unexpectedCommaExpression","import/no-anonymous-default-export","Assign arrow function to a variable before exporting as module default","ExportDefaultDeclaration","'delay' is defined but never used.","'takeLatest' is defined but never used.","'incomplete' is assigned a value but never used.","'state' is assigned a value but never used.","no-useless-escape","Unnecessary escape character: \\..","Literal","unnecessaryEscape",["185","186"],"'errortext' is assigned a value but never used.","'url' is assigned a value but never used.","'takeEvery' is defined but never used.","'all' is defined but never used.","'apiPost' is defined but never used.","'callback' is assigned a value but never used.","no-global-assign","no-unsafe-negation",{"messageId":"187","fix":"188","desc":"189"},{"messageId":"190","fix":"191","desc":"192"},"removeEscape",{"range":"193","text":"194"},"Remove the `\\`. This maintains the current functionality.","escapeBackslash",{"range":"195","text":"196"},"Replace the `\\` with `\\\\` to include the actual backslash character.",[599,600],"",[599,599],"\\"]